# Facial Landmark detection

This is a CI/CD example of an evaluation report produced by `giskard-vision` which compares a set of facial landmark detection models based on the following criteria:

- Performance on partial and entire facial parts
- Performance on images containing faces with different head poses (estimated with `6DRepNet`: https://github.com/thohemp/6DRepNet)
- Performance on images containing people from different ethnicities (estimated with `DeepFace`: https://github.com/serengil/deepface)
- Robustness against image perturbations like blurring, resizing, recoloring (performed by `opencv`: https://github.com/opencv/opencv)

## Summary of the latest run:
| criteria                 | Best(prediction_time) - FaceAlignment   | Best(prediction_time) - Mediapipe   | Best(prediction_time) - OpenCV   | Best(prediction_fail_rate) - FaceAlignment   | Best(prediction_fail_rate) - Mediapipe   | Best(prediction_fail_rate) - OpenCV   | Best(metric_value) - FaceAlignment   | Best(metric_value) - Mediapipe   | Best(metric_value) - OpenCV   |
|:-------------------------|:----------------------------------------|:------------------------------------|:---------------------------------|:---------------------------------------------|:-----------------------------------------|:--------------------------------------|:-------------------------------------|:---------------------------------|:------------------------------|
| altered color            |                                         | ✓                                   |                                  | ✓                                            |                                          |                                       |                                      | ✓                                |                               |
| blurred                  |                                         | ✓                                   |                                  | ✓                                            |                                          |                                       | ✓                                    |                                  |                               |
| cropped on left half     |                                         | ✓                                   |                                  | ✓                                            |                                          |                                       | ✓                                    |                                  |                               |
| cropped on upper half    |                                         | ✓                                   |                                  | ✓                                            |                                          |                                       |                                      |                                  | ✓                             |
| latino_ethnicity         |                                         | ✓                                   |                                  |                                              |                                          | ✓                                     |                                      |                                  | ✓                             |
| negative_roll            |                                         | ✓                                   |                                  | ✓                                            |                                          |                                       | ✓                                    |                                  |                               |
| positive_roll            |                                         | ✓                                   |                                  | ✓                                            |                                          |                                       |                                      | ✓                                |                               |
| resized with ratios: 0.5 |                                         | ✓                                   |                                  | ✓                                            |                                          |                                       | ✓                                    |                                  |                               |
| white_ethnicity          |                                         | ✓                                   |                                  | ✓                                            |                                          |                                       | ✓                                    |                                  |                               | 
## Full Report
|    | criteria                 | model         | test     | metric   |   metric_value | Best(metric_value)   |   prediction_time | Best(prediction_time)   |   prediction_fail_rate | Best(prediction_fail_rate)   |
|---:|:-------------------------|:--------------|:---------|:---------|---------------:|:---------------------|------------------:|:------------------------|-----------------------:|:-----------------------------|
|  0 | altered color            | FaceAlignment | TestDiff | NME_mean |     -0.186222  |                      |         115.208   |                         |              0.02      | ✓                            |
|  1 | altered color            | Mediapipe     | TestDiff | NME_mean |     -0.219734  | ✓                    |           8.75746 | ✓                       |              0.79      |                              |
|  2 | altered color            | OpenCV        | TestDiff | NME_mean |      0.536485  |                      |          55.0303  |                         |              0.14      |                              |
|  3 | blurred                  | FaceAlignment | TestDiff | NME_mean |     -0.0451077 | ✓                    |         119.835   |                         |              0.04      | ✓                            |
|  4 | blurred                  | Mediapipe     | TestDiff | NME_mean |      0.0566332 |                      |          10.5271  | ✓                       |              0.09      |                              |
|  5 | blurred                  | OpenCV        | TestDiff | NME_mean |      1.10417   |                      |          51.611   |                         |              0.12      |                              |
|  6 | cropped on left half     | FaceAlignment | TestDiff | NME_mean |     -0.553663  | ✓                    |          87.2156  |                         |              0.820441  | ✓                            |
|  7 | cropped on left half     | Mediapipe     | TestDiff | NME_mean |     -0.170099  |                      |           8.93611 | ✓                       |              0.951029  |                              |
|  8 | cropped on left half     | OpenCV        | TestDiff | NME_mean |     -0.0978757 |                      |          39.3954  |                         |              0.825882  |                              |
|  9 | cropped on upper half    | FaceAlignment | TestDiff | NME_mean |     -0.541586  |                      |          83.8066  |                         |              0.782941  | ✓                            |
| 10 | cropped on upper half    | Mediapipe     | TestDiff | NME_mean |     -0.2261    |                      |           8.94975 | ✓                       |              0.941765  |                              |
| 11 | cropped on upper half    | OpenCV        | TestDiff | NME_mean |     -0.786868  | ✓                    |          38.3275  |                         |              0.978824  |                              |
| 12 | latino_ethnicity         | FaceAlignment | TestDiff | NME_mean |      0.371225  |                      |          60.7821  |                         |              0.142857  |                              |
| 13 | latino_ethnicity         | Mediapipe     | TestDiff | NME_mean |      0.038642  |                      |           5.39895 | ✓                       |              0.285714  |                              |
| 14 | latino_ethnicity         | OpenCV        | TestDiff | NME_mean |     -0.738433  | ✓                    |          31.2623  |                         |              0         | ✓                            |
| 15 | negative_roll            | FaceAlignment | TestDiff | NME_mean |     -0.576123  | ✓                    |          82.8236  |                         |              0.0416667 | ✓                            |
| 16 | negative_roll            | Mediapipe     | TestDiff | NME_mean |     -0.0123974 |                      |           6.92944 | ✓                       |              0.0833333 |                              |
| 17 | negative_roll            | OpenCV        | TestDiff | NME_mean |     -0.505026  |                      |          38.2103  |                         |              0.125     |                              |
| 18 | positive_roll            | FaceAlignment | TestDiff | NME_mean |      0.54085   |                      |          87.3752  |                         |              0.0576923 | ✓                            |
| 19 | positive_roll            | Mediapipe     | TestDiff | NME_mean |      0.0147429 | ✓                    |           7.77087 | ✓                       |              0.288462  |                              |
| 20 | positive_roll            | OpenCV        | TestDiff | NME_mean |      0.386019  |                      |          44.3474  |                         |              0.192308  |                              |
| 21 | resized with ratios: 0.5 | FaceAlignment | TestDiff | NME_mean |      0.0185174 | ✓                    |         114.931   |                         |              0.04      | ✓                            |
| 22 | resized with ratios: 0.5 | Mediapipe     | TestDiff | NME_mean |      0.0358656 |                      |          10.0367  | ✓                       |              0.12      |                              |
| 23 | resized with ratios: 0.5 | OpenCV        | TestDiff | NME_mean |      0.603806  |                      |          37.9658  |                         |              0.18      |                              |
| 24 | white_ethnicity          | FaceAlignment | TestDiff | NME_mean |     -0.604868  | ✓                    |          86.7754  |                         |              0.0384615 | ✓                            |
| 25 | white_ethnicity          | Mediapipe     | TestDiff | NME_mean |      0.0260865 |                      |           7.80148 | ✓                       |              0.173077  |                              |
| 26 | white_ethnicity          | OpenCV        | TestDiff | NME_mean |     -0.543444  |                      |          42.5418  |                         |              0.0769231 |                              |